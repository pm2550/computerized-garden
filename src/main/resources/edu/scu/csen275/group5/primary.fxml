<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="720.0" prefWidth="1100.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="edu.scu.csen275.group5.PrimaryController">
   <top>
      <VBox spacing="8.0">
         <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
         <Label text="Computerized Garden Control Room" style="-fx-font-size: 20px; -fx-font-weight: bold;"/>
         <HBox spacing="12">
            <Label fx:id="summaryLabel" text="Garden offline"/>
            <Label fx:id="dayLabel" text="Day 0"/>
            <Label fx:id="clockLabel" text="Sim hours: 0"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <Button text="Help / Log Guide" onAction="#handleOpenHelp"/>
            <Button text="Snapshot" onAction="#handleStateSnapshot"/>
         </HBox>
      </VBox>
   </top>
   <center>
      <SplitPane dividerPositions="0.65" orientation="HORIZONTAL">
         <!-- Garden Map View (Main) -->
         <VBox spacing="6">
            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
            <Label text="Garden Map (Live)" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
            <!-- Fixed size container with garden background image -->
            <StackPane fx:id="gardenBackground" style="-fx-border-color: #4caf50; -fx-border-width: 2; -fx-background-color: #e8f5e9;" VBox.vgrow="ALWAYS">
               <GridPane fx:id="gardenGrid" hgap="8" vgap="8" alignment="CENTER" style="-fx-padding: 15;"/>
            </StackPane>
         </VBox>
         
         <!-- Right Panel: Plant Details Table + Log -->
         <VBox spacing="6">
            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
            
            <!-- Plant Details Table -->
            <Label text="Plant Details" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TableView fx:id="plantTable" prefHeight="250" VBox.vgrow="SOMETIMES">
               <columns>
                  <TableColumn fx:id="nameColumn" text="Plant" prefWidth="100"/>
                  <TableColumn fx:id="typeColumn" text="Type" prefWidth="80"/>
                  <TableColumn fx:id="healthColumn" text="Health%" prefWidth="70"/>
                  <TableColumn fx:id="statusColumn" text="Status" prefWidth="80"/>
               </columns>
            </TableView>
            
            <!-- Event Log -->
            <Label text="Event Log" style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            <TextArea fx:id="logArea" VBox.vgrow="ALWAYS" promptText="Events will appear here..."/>
         </VBox>
      </SplitPane>
   </center>
   <bottom>
      <VBox spacing="12">
         <padding><Insets top="12" right="12" bottom="12" left="12"/></padding>
         <HBox spacing="10">
            <Button fx:id="initButton" text="Initialize Garden" onAction="#handleInitializeGarden"/>
            <Label fx:id="rainGuidanceLabel" text="Rain range: --"/>
         </HBox>
         <GridPane hgap="12" vgap="10">
            <columnConstraints>
               <ColumnConstraints percentWidth="33"/>
               <ColumnConstraints percentWidth="33"/>
               <ColumnConstraints percentWidth="34"/>
            </columnConstraints>
            <rowConstraints>
               <RowConstraints/>
            </rowConstraints>
            <VBox spacing="6" GridPane.columnIndex="0">
               <Label text="Rain (units)"/>
               <HBox spacing="8">
                  <Spinner fx:id="rainSpinner" prefWidth="120"/>
                  <Button text="Dispatch Rain" onAction="#handleRainEvent"/>
               </HBox>
            </VBox>
            <VBox spacing="6" GridPane.columnIndex="1">
               <Label text="Temperature (Â°F)"/>
               <HBox spacing="8">
                  <Spinner fx:id="temperatureSpinner" prefWidth="120"/>
                  <Button text="Set Temperature" onAction="#handleTemperatureEvent"/>
               </HBox>
            </VBox>
            <VBox spacing="6" GridPane.columnIndex="2">
               <Label text="Parasite"/>
               <HBox spacing="8">
                  <TextField fx:id="parasiteField" promptText="aphids"/>
                  <Button text="Release" onAction="#handleParasiteEvent"/>
               </HBox>
            </VBox>
         </GridPane>
      </VBox>
   </bottom>
</BorderPane>
