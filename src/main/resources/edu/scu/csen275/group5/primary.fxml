<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane prefHeight="720.0" prefWidth="1100.0" snapToPixel="false" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="edu.scu.csen275.group5.PrimaryController">
   <top>
      <VBox spacing="8.0" snapToPixel="false">
         <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
         <Label text="Computerized Garden Control Room" styleClass="panel-heading"/>
         <VBox spacing="6" snapToPixel="false">
            <FlowPane hgap="14" vgap="4" prefWrapLength="900" snapToPixel="false">
               <Label fx:id="summaryLabel" text="Garden offline" styleClass="bold-label"/>
               <Label fx:id="dayLabel" text="Day 0" styleClass="bold-label"/>
               <Label fx:id="clockLabel" text="Sim hours: 0" styleClass="bold-label"/>
               <Label fx:id="timerStatusLabel" text="Timer: waiting..." styleClass="bold-label"/>
            </FlowPane>
            <HBox spacing="12" alignment="CENTER_LEFT" snapToPixel="false">
               <Button fx:id="nextHourButton" text="Next Hour" onAction="#handleNextHour" disable="true"/>
               <HBox spacing="6" alignment="CENTER_LEFT" snapToPixel="false">
                  <Label text="Speed"/>
                  <ComboBox fx:id="speedComboBox" prefWidth="120" disable="true" editable="true" promptText="1x"/>
               </HBox>
               <Pane HBox.hgrow="ALWAYS"/>
               <Button text="Help / Log Guide" onAction="#handleOpenHelp"/>
               <Button text="Snapshot" onAction="#handleStateSnapshot"/>
            </HBox>
         </VBox>
      </VBox>
   </top>
   <center>
      <SplitPane dividerPositions="0.65" orientation="HORIZONTAL">
         <!-- Garden Map View (Main) -->
         <VBox spacing="6" snapToPixel="false">
            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
            <Label text="Garden Map (Live)" styleClass="section-title"/>
            <!-- Fixed size container with garden background image -->
            <StackPane fx:id="gardenBackground" style="-fx-border-color: #4caf50; -fx-border-width: 2; -fx-background-color: #e8f5e9;" VBox.vgrow="ALWAYS">
               <GridPane fx:id="gardenGrid" hgap="8" vgap="8" alignment="CENTER" style="-fx-padding: 15;"/>
            </StackPane>
         </VBox>
         
         <!-- Right Panel: Plant Details Table + Log -->
         <VBox spacing="6" snapToPixel="false">
            <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
            
            <!-- Plant Details Table -->
            <Label text="Plant Details" styleClass="section-title"/>
            <TableView fx:id="plantTable" prefHeight="250" VBox.vgrow="SOMETIMES" snapToPixel="false">
               <columns>
                  <TableColumn fx:id="nameColumn" text="Plant" prefWidth="90"/>
                  <TableColumn fx:id="typeColumn" text="Type" prefWidth="80"/>
                  <TableColumn fx:id="healthColumn" text="Health %" prefWidth="80"/>
                  <TableColumn fx:id="statusColumn" text="Status" prefWidth="80"/>
               </columns>
            </TableView>
            
            <!-- Event Log -->
            <Label text="Event Log" styleClass="section-title"/>
            <TextArea fx:id="logArea" VBox.vgrow="ALWAYS" promptText="Events will appear here..."/>
         </VBox>
      </SplitPane>
   </center>
   <bottom>
      <VBox spacing="12" snapToPixel="false">
         <padding><Insets top="12" right="12" bottom="12" left="12"/></padding>
         <HBox spacing="10" snapToPixel="false">
            <Button fx:id="initButton" text="Initialize Garden" onAction="#handleInitializeGarden"/>
            <Label fx:id="rainGuidanceLabel" text="Rain range: --"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <CheckBox fx:id="autoWeatherCheckBox" text="Auto Weather / Random Events"/>
            <Button text="Developer Console" onAction="#handleOpenDeveloperConsole"/>
         </HBox>
         <HBox spacing="20" alignment="CENTER_LEFT" snapToPixel="false">
            <VBox spacing="6">
               <Label text="Sensors" styleClass="section-title"/>
               <GridPane hgap="16" vgap="8">
                  <columnConstraints>
                     <ColumnConstraints halignment="RIGHT" minWidth="140"/>
                     <ColumnConstraints minWidth="180"/>
                  </columnConstraints>
                  <rowConstraints>
                     <RowConstraints/>
                     <RowConstraints/>
                     <RowConstraints/>
                  </rowConstraints>
                  <Label text="Soil Moisture" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                  <Label fx:id="soilMoistureLabel" text="--" styleClass="bold-label" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                  <Label text="Air Temperature" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                  <Label fx:id="airTemperatureLabel" text="--" styleClass="bold-label" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                  <Label text="Parasites" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                  <Label fx:id="parasiteStatusLabel" text="None" wrapText="true" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
               </GridPane>
            </VBox>
         </HBox>

         <!-- Legacy manual controls retained for developer console reference
         <GridPane hgap="12" vgap="10">
            <columnConstraints>
               <ColumnConstraints percentWidth="33"/>
               <ColumnConstraints percentWidth="33"/>
               <ColumnConstraints percentWidth="34"/>
            </columnConstraints>
            <rowConstraints>
               <RowConstraints/>
            </rowConstraints>
            <VBox spacing="6" GridPane.columnIndex="0" snapToPixel="false">
               <Label text="Rain (units)"/>
               <HBox spacing="8" snapToPixel="false">
                  <Spinner fx:id="rainSpinner" prefWidth="120"/>
                  <Button text="Dispatch Rain" onAction="#handleRainEvent"/>
               </HBox>
            </VBox>
            <VBox spacing="6" GridPane.columnIndex="1" snapToPixel="false">
               <Label text="Temperature (Â°F)"/>
               <HBox spacing="8" snapToPixel="false">
                  <Spinner fx:id="temperatureSpinner" prefWidth="120"/>
                  <Button text="Set Temperature" onAction="#handleTemperatureEvent"/>
               </HBox>
            </VBox>
            <VBox spacing="6" GridPane.columnIndex="2" snapToPixel="false">
               <Label text="Parasite"/>
               <HBox spacing="8" snapToPixel="false">
                  <TextField fx:id="parasiteField" promptText="aphids"/>
                  <Button text="Release" onAction="#handleParasiteEvent"/>
               </HBox>
            </VBox>
         </GridPane>
         -->
      </VBox>
   </bottom>
</BorderPane>
